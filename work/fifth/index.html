<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>jQuery</title>
    <link rel="stylesheet" href="../../common/css/reset.css">
    <link rel="stylesheet" href="../../common/css/base.css">
    <link rel="stylesheet" href="./css/style.css">
  </head>
  <body>
    <div class="wrapper">
      <div class="contents">
        <p class="title">Frameworks</p>
        <div class="select-wrapper">
          <select class="select">
            <option value="all">All</option>
            <option value="css">CSS</option>
            <option value="javascript">JavaScript</option>
            <option value="php">PHP</option>
            <option value="ruby">Ruby</option>
            <option value="python">Python</option>
            <option value="scala">Scala</option>
          </select>
        </div>
        <ul class="list">
          <li data-category-type="css">
            <a href="http://getbootstrap.com/" class="article">
              <i class="article-icon is-bootstrap"></i>
              <p class="article-name">Bootstrap</p>
            </a>
          </li>
          <li data-category-type="ruby">
            <a href="http://rubyonrails.org/" class="article">
              <i class="article-icon is-ruby-on-rails"></i>
              <p class="article-name">Ruby on Rails</p>
            </a>
          </li>
          <li data-category-type="php">
            <a href="https://phalconphp.com/ja/" class="article">
              <i class="article-icon is-phalcon"></i>
              <p class="article-name">Phalcon</p>
            </a>
          </li>
          <li data-category-type="javascript">
            <a href="https://facebook.github.io/react/" class="article">
              <i class="article-icon is-react"></i>
              <p class="article-name">React</p>
            </a>
          </li>
          <li data-category-type="scala">
            <a href="https://www.playframework.com/" class="article">
              <i class="article-icon is-play"></i>
              <p class="article-name">Play</p>
            </a>
          </li>
          <li data-category-type="javascript">
            <a href="http://aurelia.io/" class="article">
              <i class="article-icon is-aurelia"></i>
              <p class="article-name">Aurelia</p>
            </a>
          </li>
          <li data-category-type="python">
            <a href="http://djangoproject.jp/" class="article">
              <i class="article-icon is-django"></i>
              <p class="article-name">Django</p>
            </a>
          </li>
          <li data-category-type="css">
            <a href="http://www.material-ui.com/#/" class="article">
              <i class="article-icon is-material-ui"></i>
              <p class="article-name">Material UI</p>
            </a>
          </li>
          <li data-category-type="php">
            <a href="https://laravel.com/" class="article">
              <i class="article-icon is-laravel"></i>
              <p class="article-name">Laravel</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <script src="../../common/js/jquery.js"></script>
    <script>
      // 今回やるのはソート機能です。
      // selectボックスをクリックして言語を選び、その言語と関係のあるリストだけが表示されるプログラムです。
      // [処理の流れ]
      // ・セレクトボックスをクリックする。
      // ・セレクトボックスのvalueとliのdata-category-typeが一致しているものをだけ表示させる。
      // ・Allを選択した場合のみ全てのliを表示させる。
      // [使うメソッド]
      // .show() 要素を表示させる
      // .hide() 要素を隠す
      // .val() 要素のvalueを取得
      // .data('') DOM要素にあるdata-~を取得できる
      // .change() セレクトボックスの値の変更をキャッチする関数
      // $().each() DOM要素を1つずつループ処理をする（ループ内で$(this)を使うと要素がひとつずつ取得できる）
      
      $(function() {
        $('.select').change(function() {
          var selectedValue = $(this).children('option:selected').val();
      /*
      jQuery(document).ready(function(){});の省略構文である$(function(){});を指定し、DOM要素をjQueryで操作する構文を１文目で指定。
      以下、function以下に処理を記述することで、webページ全体が読み込まれる前に、jQueryの処理を実行する。
      まず、htmlの方で記述されているセレクトボックスをセレクタとして指定するため、$('.select')として対象を指定。
      次に、change()メソッドを用いることで、セレクトボックスが変更された際に実行される処理を以下で記述する。
      まず、変数selectedValueを宣言し、$(this).children('option:selected').val()という値を代入。
      値の内容は、変更されたセレクトボックスの子要素をセレクタとして指定するため、$(this).children('option:selected')と指定。
      ここで、children()メソッドの引数として、option:selectedを用いることで、子要素のoption要素の中で、
      セレクトボックスで選択された子要素のみがセレクト対象となるということを指定している。
      また、val()メソッドを用いることで、htmlの方で記述されたvalue属性の値を取得出来るようになる。
      結果として、セレクトボックスの方で選択されたvalueの値が、変数selectedValueに代入されるという動きとなる。
      */
        
          $('.list li').each(function() {
            var categoryData = $(this).data('category-type');
            /*
            セレクタとして$('.list li')と指定することで、リスト要素の中の各リスト項目を操作の対象として指定。
            また、each()メソッドを用いることで、9つあるリスト項目について順に処理が行われることを記述。
            次に変数categoryDataを宣言し、$(this).data('category-type')という値を代入。
            値の内容としては、まずセレクタとして$(this)を指定し、dataメソッドを用いることで、htmlのli要素の中で定義されたdata-category-typeという
            data属性の値を取得している。
            */

            if(selectedValue == categoryData) {
              $(this).show();
            /*
            if文にて条件分岐を指定。if文の内容としては、まずセレクトボックスで選択されたvalueの値と、9つあるリスト項目のうち、data属性が一致した場合は
            一致したリスト項目を表示させるという処理を、show()メソッドを用いて記述している。
            */
            } else if (selectedValue == 'all') {
              $(this).show();
            /*
            次に、セレクトボックスにて選択されたvalueの値がallの場合は、9つあるリスト項目のうち全てを表示させるという処理をelse ifの中で記述している。
            */
            } else {
              $(this).hide();
            }
            /*
            最後に、全ての条件に当てはまらなかった場合は、そのリスト項目は非表示にするという処理を、hide()メソッドを用いてelse文の中に記述している。
            以上の記述により、セレクトボックスにて指定されたoptionのvalueの値が一致したリスト項目があれば、それを表示、valueの値がallであれば全て
            のリスト項目を表示、そのどちらでもないリスト項目については非表示という動きとなる。
            */
          });
        });
      });
      


    
    
    </script>
  </body>
</html>
